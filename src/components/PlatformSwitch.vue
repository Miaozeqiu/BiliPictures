<template>
    <div class="radio-inputs">
      <div class="slider" :style="{ top: sliderPosition }"></div>
      <label class="radio" v-for="(option, index) in options" :key="index">
        <input type="radio" :name="name" :value="option" v-model="selectedOption" @change="updateValue"/>
        <span class="name">
          <svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
            <g v-html="getIcon(option)"></g>
          </svg>
          {{ option }}
        </span>
      </label>
    </div>
</template>

  <script>
export default {
  props: {
    modelValue: {
      type: String,
      default: '电影',
    },
  },
  data() {
    return {
      selectedOption: this.modelValue || '电影',
      options: ['全部', '电影', '动漫', '纪录片', '剧集'],
      name: 'radio',
      routeToOption: {
        '/': '全部',
        '/home': '全部',
        '/movie': '电影',
        '/anime': '动漫',
        '/documentary': '纪录片',
        '/series': '剧集'
      },
      iconMap: {
        '首页': '<path d="M437.527273 297.890909c-20.945455-11.636364-48.872727-11.636364-69.818182 0-20.945455 11.636364-34.909091 34.909091-34.909091 60.509091v307.2c0 25.6 13.963636 48.872727 34.909091 60.509091 11.636364 6.981818 23.272727 9.309091 34.909091 9.309091s23.272727-2.327273 34.909091-9.309091l267.636363-153.6c20.945455-11.636364 34.909091-34.909091 34.909091-60.509091s-13.963636-48.872727-34.909091-60.509091l-267.636363-153.6z m242.036363 235.054546l-267.636363 153.6c-11.636364 6.981818-20.945455 2.327273-23.272728 0-4.654545-2.327273-11.636364-6.981818-11.636363-20.945455V358.4c0-11.636364 6.981818-18.618182 11.636363-20.945455 2.327273-2.327273 6.981818-2.327273 11.636364-2.327272 2.327273 0 6.981818 0 11.636364 2.327272l267.636363 153.6c11.636364 6.981818 11.636364 16.290909 11.636364 20.945455s0 13.963636-11.636364 20.945455z" fill="currentColor"></path><path d="M923.927273 209.454545c-6.981818-9.309091-23.272727-11.636364-32.581818-4.654545-9.309091 6.981818-11.636364 23.272727-4.654546 32.581818C947.2 316.509091 977.454545 411.927273 977.454545 512c0 256-209.454545 465.454545-465.454545 465.454545S46.545455 768 46.545455 512 256 46.545455 512 46.545455c100.072727 0 195.490909 30.254545 274.618182 90.763636 9.309091 6.981818 25.6 4.654545 32.581818-4.654546s4.654545-25.6-4.654545-32.581818C726.109091 34.909091 621.381818 0 512 0 230.4 0 0 230.4 0 512s230.4 512 512 512 512-230.4 512-512c0-109.381818-34.909091-214.109091-100.072727-302.545455z" fill="currentColor"></path>',
        '电影': '<path d="M844.832 885.344c-30.485333-20.714667-77.781333-18.965333-144.053333 9.386667A425.024 425.024 0 0 1 512 938.666667C276.362667 938.666667 85.333333 747.637333 85.333333 512S276.362667 85.333333 512 85.333333s426.666667 191.029333 426.666667 426.666667a425.013333 425.013333 0 0 1-44.405334 189.717333 32 32 0 0 1-57.301333-28.490666A361.013333 361.013333 0 0 0 874.666667 512c0-200.298667-162.368-362.666667-362.666667-362.666667S149.333333 311.701333 149.333333 512s162.368 362.666667 362.666667 362.666667c56.704 0 111.488-13.013333 161.12-37.653334l1.6-0.746666c84.746667-36.437333 154.176-39.125333 206.08-3.861334a32 32 0 1 1-35.968 52.938667zM512 416a64 64 0 1 1 0-128 64 64 0 0 1 0 128z m160 160a64 64 0 1 1 0-128 64 64 0 0 1 0 128zM512 736a64 64 0 1 1 0-128 64 64 0 0 1 0 128zM352 576a64 64 0 1 1 0-128 64 64 0 0 1 0 128z" fill="currentColor"></path>',
        '动漫': '<path d="M892 331.7L711 504.8c-6.1 5.9-6.3 15.6-0.4 21.7l175.3 179.7c26.8 27.4 39.6 62.7 36 99.1-3.4 34.5-22 66.6-51.3 88.3-23.3 20.5-131 106.4-302.3 106.4-279.2 0-506.4-218-506.4-486S289.1 28 568.3 28c185.7 0 291.6 93.6 315.1 116.9 28.1 22.4 45.5 54.6 47.9 88.7 2.5 36.6-11.4 71.4-39.3 98.1zM837.4 199l-2-1.5-1.8-1.8c-9.7-9.9-100-97.1-265.3-97.1-239.8 0-434.8 186.4-434.8 415.5s195.1 415.5 434.8 415.5c151.8 0 245.3-80.1 255.4-89.2l1.4-1.3 1.6-1.1c13.7-9.8 22.4-24.2 23.9-39.4 1.6-15.9-4.1-30.9-16.3-43.5L658.9 575.2C626 541.3 627 487 661.1 454.3l181.1-173.1c12.7-12.1 18.8-27 17.8-42.8-1.1-14.9-9.3-29.3-22.6-39.4zM600.5 325.7c-31.8 0-60.5-18.9-72.7-47.9-12.2-29-5.4-62.3 17.2-84.4 22.5-22.1 56.4-28.7 85.8-16.6 29.4 12 48.5 40.4 48.4 71.7 0 20.5-8.3 40.2-23.1 54.7-14.8 14.4-34.8 22.5-55.6 22.5z" fill="currentColor"></path>',
        '纪录片': '<path d="M890.24 381.866667c40.106667-104.106667 35.626667-187.733333-12.373333-234.666667s-135.893333-52.693333-243.84-9.173333a19.84 19.84 0 0 0-8.533334 7.04 385.066667 385.066667 0 0 0-482.133333 478.293333 23.253333 23.253333 0 0 0-5.12 7.466667c-44.8 109.44-42.666667 197.12 7.893333 247.04A147.84 147.84 0 0 0 254.506667 917.333333a360.96 360.96 0 0 0 128-27.093333c7.04-2.773333 14.08-5.973333 21.333333-8.96a384 384 0 0 0 477.44-478.293333c2.986667-7.04 6.186667-14.08 8.96-21.12z m-42.666667-205.653334c31.573333 31.786667 34.986667 92.373333 10.24 167.893334a386.346667 386.346667 0 0 0-178.346666-178.346667c75.946667-24.746667 136.32-21.333333 168.32 10.453333zM512 170.666667a342.613333 342.613333 0 0 1 323.626667 230.4 913.92 913.92 0 0 1-182.826667 251.733333 913.92 913.92 0 0 1-251.733333 182.826667A341.333333 341.333333 0 0 1 512 170.666667zM176.213333 847.786667c-32-32-35.413333-92.373333-10.453333-168.32a385.92 385.92 0 0 0 178.346667 178.56c-75.52 24.746667-136.106667 21.333333-167.893334-10.24zM854.4 512a340.053333 340.053333 0 0 1-389.546667 338.773333A1014.4 1014.4 0 0 0 682.666667 682.666667a1014.4 1014.4 0 0 0 167.68-218.24 342.826667 342.826667 0 0 1 4.053333 47.573333z" fill="currentColor"></path><path d="M498.986667 452.266667a86.613333 86.613333 0 1 0-86.613334-86.613334 86.613333 86.613333 0 0 0 86.613334 86.613334z m0-130.346667a43.946667 43.946667 0 1 1-43.946667 43.733333 43.733333 43.733333 0 0 1 43.946667-43.733333zM454.186667 702.72a68.266667 68.266667 0 1 0-68.053334-68.053333 68.266667 68.266667 0 0 0 68.053334 68.053333z m0-93.653333a25.6 25.6 0 1 1 0 50.986666 25.6 25.6 0 0 1 0-50.986666zM670.72 725.333333a32 32 0 1 0 32-31.786666 32 32 0 0 0-32 31.786666z m32-10.666666a10.666667 10.666667 0 0 1 10.666667 10.666666 10.88 10.88 0 1 1-21.333334 0 10.666667 10.666667 0 0 1 10.666667-11.093333z" fill="currentColor"></path>',
        '剧集': '<path d="M705.28 107.968a32 32 0 0 0-45.248-45.248L512 210.752 406.592 105.344a32 32 0 1 0-45.248 45.248L434.752 224h-10.496c-78.4 0-140.544 0-189.12 6.528-50.048 6.72-90.496 20.928-122.432 52.864-32 31.872-46.08 72.384-52.864 122.432C53.312 454.4 53.312 516.48 53.312 594.944v4.8c0 78.4 0 140.48 6.528 189.12 6.72 50.048 20.928 90.496 52.864 122.432 31.936 32 72.384 46.08 122.432 52.864 48.64 6.528 110.72 6.528 189.12 6.528H599.68c78.4 0 140.48 0 189.12-6.528 49.984-6.72 90.496-20.928 122.432-52.864 31.936-31.936 46.08-72.384 52.8-122.432 6.528-48.64 6.528-110.72 6.528-189.12v-4.8c0-78.4 0-140.544-6.528-189.12-6.72-50.048-20.864-90.56-52.8-122.432-31.936-32-72.448-46.08-122.432-52.864-48.64-6.528-110.72-6.528-189.12-6.528h-10.496l116.032-116.032zM157.952 328.64c18.048-18.112 42.752-28.928 85.76-34.688 43.776-5.888 101.568-5.952 182.912-5.952h170.688c81.344 0 139.2 0.064 183.04 5.952 42.88 5.76 67.648 16.64 85.696 34.688 18.048 18.048 28.864 42.752 34.624 85.696 5.888 43.84 5.952 101.632 5.952 183.04 0 81.28 0 139.136-5.952 182.976-5.76 42.88-16.576 67.648-34.624 85.76-18.048 17.984-42.816 28.8-85.76 34.56-43.776 5.952-101.632 6.016-182.976 6.016H426.624c-81.28 0-139.136-0.064-182.976-6.016-42.88-5.76-67.648-16.576-85.76-34.56-17.984-18.112-28.8-42.88-34.56-85.76-5.952-43.84-6.016-101.632-6.016-183.04 0-81.28 0.064-139.136 5.952-183.04 5.76-42.88 16.64-67.584 34.688-85.632z" fill="currentColor"></path>'
      }
    };
  },
  watch: {
    '$route'(to) {
      const option = this.routeToOption[to.path];
      if (option && option !== this.selectedOption) {
        this.selectedOption = option;
      }
    }
  },
  computed: {
    sliderPosition() {
      const index = this.options.indexOf(this.selectedOption);
      const optionHeight = 100 / this.options.length;  // 根据选项数量动态计算高度
      return `${index * optionHeight + 0.25}%`;  // 调整滑块位置，考虑padding
    },
  },
  mounted() {
    // 组件挂载后根据当前路由设置初始选项
    this.setOptionFromRoute();
  },
  methods: {
    setOptionFromRoute() {
      const currentPath = this.$route?.path || window.location.pathname;
      const option = this.routeToOption[currentPath];
      if (option) {
        this.selectedOption = option;
      }
    },
    updateValue() {
      this.$emit('update:modelValue', this.selectedOption);
    },
    getIcon(option) {
      return this.iconMap[option] || '';
    },
  },
};
</script>

  <style scoped>
  svg{
    height: 30px;
  }

  .icon {
    width: 18px;
    height: 18px;
    margin-right: 8px;
    flex-shrink: 0;
    fill: currentColor;
  }
  .radio-inputs {
    position: relative;
    display: flex;
    flex-direction: column;
    border-radius: 0.5rem;
    background-color: #ffffff;
    /* box-shadow: 0 0 0px 1px rgba(0, 0, 0, 0.06); */
    /* padding: 0.25rem; */
    width: 200px;
    font-size: 14px;
    opacity: 0;
    animation: fadeInUp 0.6s ease-out forwards;
  }

  .radio-inputs .radio {
    flex: 1 1 auto;
    text-align: center;
    position: relative;
    height: 20%;
    display: flex;
    align-items: center;
  }

  .radio-inputs .radio:nth-child(2) .name {
    animation: textFadeIn 0.5s ease-out 0.4s both;
  }

  .radio-inputs .radio:nth-child(3) .name {
    animation: textFadeIn 0.5s ease-out 0.5s both;
  }

  .radio-inputs .radio:nth-child(4) .name {
    animation: textFadeIn 0.5s ease-out 0.6s both;
  }

  .radio-inputs .radio:nth-child(5) .name {
    animation: textFadeIn 0.5s ease-out 0.7s both;
  }

  .radio-inputs .radio:nth-child(6) .name {
    animation: textFadeIn 0.5s ease-out 0.8s both;
  }

  .radio-inputs .radio input {
    display: none;
  }

  .radio-inputs .radio .name {
    display: flex;
    cursor: pointer;
    align-items: center;
    justify-content: flex-start;
    border-radius: 0.5rem;
    padding: 0.75rem 1rem;
    color: rgba(51, 65, 85, 1);
    transition: color 0.15s ease-in-out, transform 0.2s ease;
    position: relative;
    z-index: 3;
    width: 100%;
    white-space: nowrap;
    height: 100%;
    box-sizing: border-box;
    opacity: 0;
    transform: translateX(-10px);
  }

  .radio-inputs .radio .name:hover {
    transform: translateX(0) scale(1.02);
  }

  .radio-inputs .radio input:checked + .name {
    font-weight: 600;
    color: #ff69b4;
  }

  .radio-inputs .radio input:checked + .name .icon {
    fill: #ff69b4;
  }

  .slider {
    position: absolute;
    background-color: #eeeef5;
    border-radius: 0.5rem;
    transition: all 0.3s ease;
    height: calc(20% - 0.125rem);  /* 20%减去padding调整 */
    width: calc(100% - 0.5rem);
    left: 0.25rem;
    /* box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12); */
    z-index: 1;
    opacity: 0;
    animation: slideIn 0.8s ease-out 0.3s forwards;
  }

  /* 首次加载动画 */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideIn {
     from {
       opacity: 0;
       transform: scale(0.8);
     }
     to {
       opacity: 1;
       transform: scale(1);
     }
   }

   @keyframes textFadeIn {
     from {
       opacity: 0;
       transform: translateX(-10px);
     }
     to {
       opacity: 1;
       transform: translateX(0);
     }
   }

  span{

    -webkit-tap-highlight-color: transparent;
  }
  </style>
